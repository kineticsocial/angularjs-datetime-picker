(function(){angular.module("angularjs-datetime-picker",[]);var c=function(h){(typeof h=="string")&&(h=new Date(h));var g=new Date(h.getFullYear(),0,1);var m=new Date(h.getFullYear(),6,1);var j=Math.max(g.getTimezoneOffset(),m.getTimezoneOffset());var i=h.getTimezoneOffset()<j;var l=i?j-60:j;var k=l>=0?"-":"+";return k+("0"+(l/60)).slice(-2)+":"+("0"+(l%60)).slice(-2)};var f=function(h,j,g){var i=g("DatetimePickerCtrl");return{open:function(k){i.openDatetimePicker(k)},close:function(){i.closeDatetimePicker()}}};f.$inject=["$compile","$document","$controller"];angular.module("angularjs-datetime-picker").factory("DatetimePicker",f);var e=function(h,j){var g;var k=this;var i=function(l){l&&l.remove();j[0].body.removeEventListener("click",k.closeDatetimePicker)};this.openDatetimePicker=function(l){this.closeDatetimePicker();var p=angular.element("<div datetime-picker-popup ng-cloak></div>");l.dateFormat&&p.attr("date-format",l.dateFormat);l.ngModel&&p.attr("ng-model",l.ngModel);l.year&&p.attr("year",parseInt(l.year));l.month&&p.attr("month",parseInt(l.month));l.day&&p.attr("day",parseInt(l.day));l.hour&&p.attr("hour",parseInt(l.hour));l.minute&&p.attr("minute",parseInt(l.minute));if(l.dateOnly===""||l.dateOnly===true){p.attr("date-only","true")}if(l.closeOnSelect==="false"){p.attr("close-on-select","false")}var m=l.triggerEl;l.scope=l.scope||angular.element(m).scope();g=h(p)(l.scope)[0];g.triggerEl=l.triggerEl;j[0].body.appendChild(g);var o=m.getBoundingClientRect();l.scope.$apply();var n=g.getBoundingClientRect();g.style.position="absolute";if(o.width>n.width){g.style.left=(o.left+o.width-n.width+window.scrollX)+"px"}else{g.style.left=(o.left+window.scrollX)+"px"}if(o.top<300||window.innerHeight-o.bottom>300){g.style.top=(o.bottom+window.scrollY)+"px"}else{g.style.top=(o.top-n.height+window.scrollY)+"px"}j[0].body.addEventListener("click",this.closeDatetimePicker)};this.closeDatetimePicker=function(l){var m=l&&l.target;var n=j[0].querySelector("div[datetime-picker-popup]");if(l&&m){if(m.hasAttribute("datetime-picker")){}else{if(n&&n.contains(m)){}else{i(n)}}}else{i(n)}}};e.$inject=["$compile","$document"];angular.module("angularjs-datetime-picker").controller("DatetimePickerCtrl",e);var b=['<div class="angularjs-datetime-picker">','  <div class="adp-month">','    <button type="button" class="adp-prev" ng-click="addMonth(-1)">&laquo;</button>','    <span title="{{months[mv.month].fullName}}">{{months[mv.month].shortName}}</span> {{mv.year}}','    <button type="button" class="adp-next" ng-click="addMonth(1)">&raquo;</button>',"  </div>",'  <div class="adp-days" ng-click="setDate($event)">','    <div class="adp-day-of-week" ng-repeat="dayOfWeek in ::daysOfWeek" title="{{dayOfWeek.fullName}}">{{::dayOfWeek.firstLetter}}</div>','    <div class="adp-day" ng-show="mv.leadingDays.length < 7" ng-repeat="day in mv.leadingDays">{{::day}}</div>','    <div class="adp-day selectable" ng-repeat="day in mv.days" ',"      today=\"{{today}}\" d2=\"{{mv.year + '-' + (mv.month + 1) + '-' + day}}\"",'      ng-class="{',"        selected: (day == selectedDay),","        today: (today == (mv.year + '-' + (mv.month + 1) + '-' + day)),","        weekend: (mv.leadingDays.length + day)%7 == 1 || (mv.leadingDays.length + day)%7 == 0",'      }">',"      {{::day}}","    </div>",'    <div class="adp-day" ng-show="mv.trailingDays.length < 7" ng-repeat="day in mv.trailingDays">{{::day}}</div>',"  </div>",'  <div class="adp-days" id="adp-time"> ','    <label class="timeLabel">Time:</label> <span class="timeValue">{{("0"+inputHour).slice(-2)}} : {{("0"+inputMinute).slice(-2)}}</span><br/>','    <label class="hourLabel">Hour:</label> <input class="hourInput" type="range" min="0" max="23" ng-model="inputHour" ng-change="updateNgModel()" />','    <label class="minutesLabel">Min:</label> <input class="minutesInput" type="range" min="0" max="59" ng-model="inputMinute"  ng-change="updateNgModel()"/> ',"  </div> ","</div>"].join("\n");var a=function(k,l){var o,j,n,g;var h=function(){o=[],j=[];n=[],g=0;for(var q=1;q<=31;q++){o.push(q)}for(var q=0;q<12;q++){j.push({fullName:k.DATETIME_FORMATS.MONTH[q],shortName:k.DATETIME_FORMATS.SHORTMONTH[q]})}for(var q=0;q<7;q++){var p=k.DATETIME_FORMATS.DAY[(q+g)%7];n.push({fullName:p,firstLetter:p.substr(0,1)})}g=0};var i=function(v,s){if(s>11){v++}else{if(s<0){v--}}s=(s+12)%12;var w=new Date(v,s,1),y=new Date(v,s+1,0),t=new Date(v,s,0),p=y.getDate(),x=t.getDate(),r=w.getDay(),q=(r-g+7)%7||7,u=o.slice(0,6*7-(q+p));if(u.length>7){u=u.slice(0,u.length-7)}return{year:v,month:s,days:o.slice(0,p),leadingDays:o.slice(-q-(31-x),x),trailingDays:u}};var m=function(s,r,q,t){h();var p=q.dateFormat||"short";s.months=j;s.daysOfWeek=n;s.inputHour;s.inputMinute;if(s.dateOnly===true){r[0].querySelector("#adp-time").style.display="none"}s.$applyAsync(function(){t.triggerEl=angular.element(r[0].triggerEl);if(q.ngModel){var x=""+t.triggerEl.scope().$eval(q.ngModel);if(x){if(!x.match(/[0-9]{2}:/)){x+=" 00:00:00"}x=x.replace(/([0-9]{2}-[0-9]{2})-([0-9]{4})/,"$2-$1");x=x.replace(/([\/-][0-9]{2,4})\ ([0-9]{2}\:[0-9]{2}\:)/,"$1T$2");x=x.replace(/EDT|EST|CDT|CST|MDT|PDT|PST|UT|GMT/g,"");x=x.replace(/\s*\(\)\s*/,"");x=x.replace(/[\-\+][0-9]{2}:?[0-9]{2}$/,"");x+=c(x);var B=new Date(x);s.selectedDate=new Date(B.getFullYear(),B.getMonth(),B.getDate(),B.getHours(),B.getMinutes(),B.getSeconds())}}if(!s.selectedDate||isNaN(s.selectedDate.getTime())){var w=new Date();var y=s.year||w.getFullYear();var z=s.month?(s.month-1):w.getMonth();var v=s.day||w.getDate();var u=s.hour==0?0:(s.hour||w.getHours());var A=s.minute==0?0:(s.minute||w.getMinutes());s.selectedDate=new Date(y,z,v,u,A,0)}s.inputHour=s.selectedDate.getHours();s.inputMinute=s.selectedDate.getMinutes();s.mv=i(s.selectedDate.getFullYear(),s.selectedDate.getMonth());s.today=l(new Date(),"yyyy-M-d");if(s.mv.year==s.selectedDate.getFullYear()&&s.mv.month==s.selectedDate.getMonth()){s.selectedDay=s.selectedDate.getDate()}else{s.selectedDay=null}});s.addMonth=function(u){s.mv=i(s.mv.year,s.mv.month+u)};s.setDate=function(u){var v=angular.element(u.target)[0];if(v.className.indexOf("selectable")!==-1){s.updateNgModel(parseInt(v.innerHTML));if(s.closeOnSelect!==false){t.closeDatetimePicker()}}};s.updateNgModel=function(u){u=u?u:s.selectedDate.getDate();s.selectedDate=new Date(s.mv.year,s.mv.month,u,s.inputHour,s.inputMinute,0);s.selectedDay=s.selectedDate.getDate();if(q.ngModel){var w=t.triggerEl.scope(),v;if(w.$eval(q.ngModel)&&w.$eval(q.ngModel).constructor.name==="Date"){v=new Date(l(s.selectedDate,p))}else{v=l(s.selectedDate,p)}w.$eval(q.ngModel+"= date",{date:v})}};s.$on("$destroy",t.closeDatetimePicker)};return{restrict:"A",template:b,controller:"DatetimePickerCtrl",replace:true,scope:{year:"=",month:"=",day:"=",hour:"=",minute:"=",dateOnly:"=",closeOnSelect:"="},link:m}};a.$inject=["$locale","dateFilter"];angular.module("angularjs-datetime-picker").directive("datetimePickerPopup",a);var d=function(g,h){return{require:"ngModel",link:function(k,j,i,l){k.$watch(i.ngModel,function(o){if(!o||o==""){return}var n=new Date(o);l.$setValidity("date",!n?false:true);var m=new Date();if(i.hasOwnProperty("futureOnly")){l.$setValidity("future-only",n<m?false:true)}});j[0].addEventListener("click",function(){h.open({triggerEl:j[0],dateFormat:i.dateFormat,ngModel:i.ngModel,year:i.year,month:i.month,day:i.day,hour:i.hour,minute:i.minute,dateOnly:i.dateOnly,futureOnly:i.futureOnly,closeOnSelect:i.closeOnSelect})})}}};d.$inject=["$parse","DatetimePicker"];angular.module("angularjs-datetime-picker").directive("datetimePicker",d)})();